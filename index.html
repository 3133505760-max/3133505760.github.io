<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>é˜¿è±ªå¡å¯†å…±äº«å¹³å° - ä¸€ä½“åŒ…ç‰ˆ</title>
    <style>
        * {margin:0;padding:0;box-sizing:border-box;font-family:"å¾®è½¯é›…é»‘",Arial,sans-serif;}
        :root {
            --base-font: 12px;
            --ai-color: #9c27b0;
            --admin-color: #e74c3c;
            --online-color: #4CAF50;
        }
        body {
            color:#fff;
            min-height:100vh;
            padding:20px;
            display:flex;
            justify-content:center;
            align-items:center;
            position:relative;
            font-size:var(--base-font);
            overflow-x:hidden;
            background:#1a1a2e;
        }
        .container {
            width:100%;
            max-width:900px;
            background:rgba(22, 33, 62, 0.95);
            border-radius:20px;
            padding:30px;
            box-shadow:0 0 30px rgba(0,0,0,0.4);
            position:relative;
            z-index:99;
            border:1px solid rgba(76, 175, 80, 0.3);
        }
        h1 {
            text-align:center;margin-bottom:30px;
            font-size:calc(var(--base-font) + 12px);
            color:#4CAF50;
            font-weight:bold;
        }
        h2 {
            text-align:center;margin:20px 0;
            font-size:calc(var(--base-font) + 6px);
            color:#f0f0f0;
        }
        .stat-card {
            background:rgba(37, 45, 74, 0.9);
            border-radius:10px;
            padding:15px;
            margin:10px 0;
            text-align:center;
            border:1px solid rgba(255,255,255,0.1);
        }
        .stat-card .stat-title {
            font-size:calc(var(--base-font) - 1px);
            color:#ccc;
            margin-bottom:5px;
        }
        .stat-card .stat-value {
            font-size:calc(var(--base-font) + 6px);
            font-weight:bold;
            color:var(--online-color);
        }
        .stat-card.admin {
            border-color:var(--admin-color);
        }
        .stat-card.admin .stat-value {
            color:var(--admin-color);
        }
        .mode-switch {
            display:flex;
            gap:10px;
            margin:20px 0;
            border-radius:10px;
            background:#252d4a;
            padding:5px;
        }
        .mode-btn {
            flex:1;
            padding:10px;
            border:none;
            border-radius:8px;
            font-size:var(--base-font);
            cursor:pointer;
            background:transparent;
            color:#fff;
            transition:all 0.2s;
        }
        .mode-btn.active {
            background:#4CAF50;
            color:#fff;
        }
        .mode-btn.ai-active {
            background:var(--ai-color);
            color:#fff;
        }
        .form-box {margin:20px 0;}
        input, select, textarea {
            width:100%;
            padding:15px;
            margin:10px 0;
            border:none;
            border-radius:10px;
            font-size:var(--base-font);
            background:#252d4a;
            color:#fff;
            outline:none;
            border:1px solid rgba(255,255,255,0.1);
            transition:all 0.2s;
        }
        input:focus, select:focus, textarea:focus {
            border-color:#4CAF50;
            box-shadow:0 0 0 2px rgba(76, 175, 80, 0.2);
        }
        textarea.ai-input:focus {
            border-color:var(--ai-color);
            box-shadow:0 0 0 2px rgba(156, 39, 176, 0.2);
        }
        textarea {min-height:90px;resize:none;}
        input::placeholder, textarea::placeholder {
            color:#999;
            font-size:calc(var(--base-font) - 1px);
        }
        button {
            width:100%;
            padding:15px;
            border:none;
            border-radius:10px;
            font-size:calc(var(--base-font) + 1px);
            font-weight:bold;
            cursor:pointer;
            margin:10px 0;
            transition:all 0.2s;
            position:relative;
            z-index:99;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        .btn-primary {background:#4CAF50;color:#fff;}
        .btn-primary:hover {background:#43a047;transform:translateY(-2px);box-shadow:0 4px 10px rgba(76, 175, 80, 0.3);}
        .btn-secondary {background:#2196F3;color:#fff;}
        .btn-secondary:hover {background:#1976D2;transform:translateY(-2px);box-shadow:0 4px 10px rgba(33, 150, 243, 0.3);}
        .btn-warning {background:#f39c12;color:#fff;}
        .btn-warning:hover {background:#e67e22;transform:translateY(-2px);box-shadow:0 4px 10px rgba(243, 156, 18, 0.3);}
        .btn-danger {background:#e74c3c;color:#fff;}
        .btn-danger:hover {background:#c0392b;transform:translateY(-2px);box-shadow:0 4px 10px rgba(231, 76, 60, 0.3);}
        .btn-ai {background:var(--ai-color);color:#fff;}
        .btn-ai:hover {background:#8e24aa;transform:translateY(-2px);box-shadow:0 4px 10px rgba(156, 39, 176, 0.3);}
        .btn-link {
            background:transparent;
            color:#4CAF50;
            padding:0;
            font-size:var(--base-font);
            text-decoration:underline;
        }
        .btn-link.ai-link {color:var(--ai-color);}
        .btn-link:hover {color:#60c864;}
        .btn-link.ai-link:hover {color:#ba68c8;}
        .btn-sm {
            width:auto;
            padding:8px 15px;
            font-size:calc(var(--base-font) - 1px);
            margin:0 5px;
        }
        .btn-del {
            width:auto;
            padding:5px 10px;
            font-size:calc(var(--base-font) - 2px);
            background:var(--admin-color);
            color:#fff;
            border-radius:5px;
            margin-top:5px;
            cursor:pointer;
        }
        .btn-del:hover {
            background:#c0392b;
            transform:translateY(-1px);
        }
        .msg {text-align:center;margin:10px 0;font-size:var(--base-font);height:22px;}
        .err-msg {color:var(--admin-color);}
        .succ-msg {color:#4CAF50;}
        .ai-msg {color:var(--ai-color);}
        .admin-msg {color:var(--admin-color);font-weight:bold;}
        .online-msg {color:var(--online-color);font-weight:bold;}
        .page {display:none;}
        .page.active {display:block;animation:fadeIn 0.3s ease;}
        .chat-panel {display:none;}
        .chat-panel.active {display:block;animation:fadeIn 0.3s ease;}
        @keyframes fadeIn {
            from {opacity:0;transform:translateY(10px);}
            to {opacity:1;transform:translateY(0);}
        }
        .movie-btn {
            font-size:calc(var(--base-font) + 2px);
            padding:20px;
            margin:20px 0;
            background:linear-gradient(135deg, #e74c3c, #f39c12);
            border-radius:12px;
        }
        .movie-btn:hover {
            background:linear-gradient(135deg, #c0392b, #e67e22);
            transform:translateY(-3px);
            box-shadow:0 6px 15px rgba(231, 76, 60, 0.4);
        }
        .chat-container {display:flex;flex-direction:column;height:400px;margin:20px 0;border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,0.1);}
        .chat-list {
            flex:1;background:#252d4a;
            padding:15px;overflow-y:auto;
            font-size:var(--base-font);
        }
        .chat-item {
            max-width:75%;margin:8px 0;padding:12px 15px;
            border-radius:15px;font-size:var(--base-font);
            position:relative;
        }
        .chat-item.send {
            margin-left:auto;background:rgba(76, 175, 80, 0.8);
            border-bottom-right-radius:5px;
        }
        .chat-item.receive {
            margin-right:auto;background:rgba(33, 150, 243, 0.8);
            border-bottom-left-radius:5px;
        }
        .chat-item.ai-chat {
            margin-right:auto;background:rgba(156, 39, 176, 0.8);
            border-bottom-left-radius:5px;
        }
        .chat-item .sender {
            font-size:calc(var(--base-font) - 3px);
            opacity:0.8;
            margin-bottom:3px;
        }
        .chat-time {
            font-size:calc(var(--base-font) - 3px);
            color:#ddd;text-align:right;margin-top:5px;
            opacity:0.8;
        }
        .chat-input-box {
            display:flex;gap:10px;padding:15px;
            background:rgba(37, 45, 74, 0.9);
        }
        .chat-input-box textarea {flex:1;margin:0;padding:12px;height:60px;}
        .chat-input-box button {width:auto;padding:0 25px;margin:0;}
        .list-item {
            background:#252d4a;border-radius:10px;
            padding:15px;margin:10px 0;
            cursor:pointer;transition:all 0.2s;
            border:1px solid rgba(255,255,255,0.1);
            font-size:var(--base-font);
            display:flex;
            justify-content:space-between;
            align-items:flex-start;
            flex-direction:column;
        }
        .list-item:hover {
            background:#353d5a;
            border-color:rgba(76, 175, 80, 0.3);
            transform:translateY(-2px);
        }
        .list-item.ai-item:hover {
            border-color:var(--ai-color);
        }
        .list-item.admin-item {
            border-left:4px solid var(--admin-color);
        }
        .list-item.user-item {
            border-left:4px solid var(--online-color);
        }
        .list-item .item-content {
            width:100%;
        }
        .list-item .item-actions {
            width:100%;
            margin-top:10px;
            display:flex;
            justify-content:flex-end;
        }
        .no-result {
            text-align:center;color:#999;
            padding:30px 0;font-size:var(--base-font);
        }
        .avatar-setting {
            position:fixed;top:20px;left:20px;
            z-index:999;display:none;
        }
        .avatar-box {
            width:60px;height:60px;border-radius:50%;
            border:3px solid #4CAF50;overflow:hidden;
            margin-bottom:5px;
        }
        .avatar-box.ai-avatar {
            border-color:var(--ai-color);
        }
        .avatar-box img {width:100%;height:100%;object-fit:cover;}
        .online-tag {
            display:inline-block;
            width:8px;height:8px;
            border-radius:50%;
            background:var(--online-color);
            margin-right:5px;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% {opacity:1;}
            50% {opacity:0.5;}
            100% {opacity:1;}
        }
        .offline-tag {
            display:inline-block;
            width:8px;height:8px;
            border-radius:50%;
            background:#999;
            margin-right:5px;
        }
        @media (max-width:600px) {
            .container {padding:20px;border-radius:15px;}
            .mode-switch {flex-direction:column;}
            .chat-input-box {flex-direction:column;gap:10px;}
            .chat-input-box button {width:100%;}
            .chat-container {height:300px;}
            .avatar-setting {top:10px;left:10px;}
            .avatar-box {width:50px;height:50px;}
            .list-item.admin-item {border-left:3px solid var(--admin-color);}
            .list-item.user-item {border-left:3px solid var(--online-color);}
            .stat-card {padding:10px;}
            .stat-card .stat-value {font-size:calc(var(--base-font) + 4px);}
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¦–é¡µ -->
        <div class="page active" id="indexPage">
            <h1>é˜¿è±ªå¡å¯†å…±äº«å¹³å° - ä¸€ä½“åŒ…ç‰ˆ</h1>
            <div class="form-box">
                <button class="btn-primary" onclick="showPage('loginPage')">è´¦æˆ·ç™»å½•</button>
                <button class="btn-secondary" onclick="showPage('registerPage')">è´¦æˆ·æ³¨å†Œ</button>
                <button class="btn-warning" onclick="showPage('adminLoginPage')">ç®¡ç†åå°</button>
            </div>
        </div>

        <!-- æ³¨å†Œé¡µ -->
        <div class="page" id="registerPage">
            <h1>è´¦æˆ·æ³¨å†Œ</h1>
            <div class="form-box">
                <input type="text" id="regUser" placeholder="ç”¨æˆ·åï¼ˆ3-10ä½ï¼‰" autocomplete="off">
                <input type="password" id="regPwd" placeholder="å¯†ç ï¼ˆ6-16ä½ï¼‰" autocomplete="off">
                <button class="btn-primary" onclick="userReg()">ç«‹å³æ³¨å†Œ</button>
                <p class="msg err-msg" id="regMsg"></p>
                <button class="btn-link" onclick="showPage('indexPage')">â† è¿”å›é¦–é¡µ</button>
            </div>
        </div>

        <!-- ç™»å½•é¡µ -->
        <div class="page" id="loginPage">
            <h1>è´¦æˆ·+å¡å¯†ç™»å½•</h1>
            <div class="form-box">
                <input type="text" id="loginUser" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" autocomplete="off">
                <input type="password" id="loginPwd" placeholder="è¯·è¾“å…¥å¯†ç " autocomplete="off">
                <input type="text" id="loginCard" placeholder="è¯·è¾“å…¥å¡å¯†ï¼ˆå¤šè®¾å¤‡å…±äº«ï¼‰" autocomplete="off">
                <button class="btn-primary" onclick="userLogin()">ç«‹å³ç™»å½•</button>
                <p class="msg err-msg" id="loginMsg"></p>
                <button class="btn-link" onclick="showPage('indexPage')">â† è¿”å›é¦–é¡µ</button>
            </div>
        </div>

        <!-- æ ¸å¿ƒåŠŸèƒ½é¡µ -->
        <div class="page" id="mainPage">
            <h1>é˜¿è±ªå¼€å‘ - äº¤æµå¹³å°</h1>
            <div style="text-align:right;font-size:calc(var(--base-font) - 1px);color:#ccc;margin:-20px 0 20px 0;" id="userNameShow">
                å½“å‰ç™»å½•ï¼š<span id="currentUserName"></span> <span class="online-tag"></span>
            </div>
            
            <button class="movie-btn" onclick="openMovieSite()">ğŸ“º çœ‹å°ç”µå½±</button>

            <!-- æ¨¡å¼åˆ‡æ¢ -->
            <div class="mode-switch">
                <button class="mode-btn active" id="multiModeBtn" onclick="switchMode('multi')">ğŸ‘¥ å¤šäººäº¤æµæ¨¡å¼</button>
                <button class="mode-btn" id="aiModeBtn" onclick="switchMode('ai')">ğŸ¤– AIå¯¹è¯æ¨¡å¼</button>
            </div>

            <!-- å¤šäººäº¤æµé¢æ¿ -->
            <div class="chat-panel active" id="multiChatPanel">
                <div class="form-box">
                    <button class="btn-primary" onclick="showSubPage('friendListSubPage')">ğŸ‘¥ å¥½å‹åˆ—è¡¨</button>
                    <button class="btn-secondary" onclick="showSubPage('addFriendSubPage')">â• æ·»åŠ å¥½å‹</button>
                </div>

                <!-- å¥½å‹åˆ—è¡¨å­é¡µ -->
                <div class="chat-panel active" id="friendListSubPage">
                    <h2>æˆ‘çš„å¥½å‹ï¼ˆ<span id="friendCount">0</span>ï¼‰</h2>
                    <div id="friendList" class="no-result">æš‚æ— å¥½å‹ï¼Œå¿«å»æ·»åŠ å§</div>
                </div>

                <!-- æ·»åŠ å¥½å‹å­é¡µ -->
                <div class="chat-panel" id="addFriendSubPage">
                    <div class="form-box">
                        <input type="text" id="addFriendName" placeholder="è¾“å…¥å¥½å‹ç”¨æˆ·å" autocomplete="off">
                        <button class="btn-primary" onclick="addFriend()">æœç´¢å¹¶æ·»åŠ </button>
                        <p class="msg err-msg" id="addFriendMsg"></p>
                        <div id="friendInfo"></div>
                    </div>
                    <button class="btn-link" onclick="showSubPage('friendListSubPage')">â† è¿”å›å¥½å‹åˆ—è¡¨</button>
                </div>

                <!-- å¤šäººèŠå¤©å­é¡µ -->
                <div class="chat-panel" id="multiChatSubPage">
                    <h2 id="multiChatTitle">ä¸ å¥½å‹ èŠå¤©</h2>
                    <div class="chat-container">
                        <div id="multiChatList" class="chat-list no-result">è¿˜æ²¡æœ‰èŠå¤©è®°å½•ï¼Œå‘ä¸ªæ¶ˆæ¯æ‰“ä¸ªæ‹›å‘¼å§ï½</div>
                        <div class="chat-input-box">
                            <textarea id="multiChatContent" placeholder="è¾“å…¥æ¶ˆæ¯å†…å®¹ï¼Œå›è½¦å¯å‘é€"></textarea>
                            <button class="btn-primary" onclick="sendMultiChatMsg()">å‘é€</button>
                        </div>
                    </div>
                    <button class="btn-link" onclick="showSubPage('friendListSubPage')">â† è¿”å›å¥½å‹åˆ—è¡¨</button>
                </div>
            </div>

            <!-- AIå¯¹è¯é¢æ¿ -->
            <div class="chat-panel" id="aiChatPanel">
                <div class="form-box list-item ai-item">
                    <p>ğŸ¤– æ™ºèƒ½AIåŠ©æ‰‹</p>
                    <p>æ”¯æŒå®æ—¶å¯¹è¯ã€é—®é¢˜è§£ç­”ã€é—²èŠäº’åŠ¨ï¼Œæ— éœ€æ·»åŠ å¥½å‹ï¼Œç›´æ¥èŠå¤©ï½</p>
                </div>
                <div class="chat-container">
                    <div id="aiChatList" class="chat-list no-result">ğŸ¤– ä½ å¥½å‘€ï¼æˆ‘æ˜¯ä½ çš„æ™ºèƒ½AIåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆæƒ³èŠçš„å°½ç®¡è¯´ï½</div>
                    <div class="chat-input-box">
                        <textarea id="aiChatContent" class="ai-input" placeholder="è¾“å…¥æƒ³å’ŒAIè¯´çš„è¯ï¼Œå›è½¦å¯å‘é€"></textarea>
                        <button class="btn-ai" onclick="sendAIChatMsg()">å‘é€</button>
                    </div>
                </div>
            </div>

            <button class="btn-danger" onclick="userLogout()">ğŸšª é€€å‡ºç™»å½•</button>
        </div>

        <!-- ä¿®æ”¹èµ„æ–™é¡µ -->
        <div class="page" id="profilePage">
            <h1>ä¿®æ”¹ä¸ªäººèµ„æ–™</h1>
            <div class="form-box">
                <input type="text" id="newNickname" placeholder="è¾“å…¥æ–°æ˜µç§°ï¼ˆ3-10ä½ï¼‰" autocomplete="off">
                <button class="btn-secondary" onclick="alert('å¤´åƒä¿®æ”¹åŠŸèƒ½å¼€å‘ä¸­ï½')">ğŸ–¼ï¸ æ›´æ¢å¤´åƒ</button>
                <button class="btn-primary" onclick="updateProfile()">ğŸ’¾ ä¿å­˜ä¿®æ”¹</button>
                <p class="msg succ-msg" id="profileMsg"></p>
                <button class="btn-link" onclick="showPage('mainPage')">â† è¿”å›äº¤æµå¹³å°</button>
            </div>
        </div>

        <!-- ç®¡ç†å‘˜ç™»å½•é¡µ -->
        <div class="page" id="adminLoginPage">
            <h1>ç®¡ç†å‘˜ç™»å½•</h1>
            <div class="form-box">
                <input type="text" id="adminUser" placeholder="ç®¡ç†å‘˜è´¦å·" autocomplete="off" value="admin">
                <input type="password" id="adminPwd" placeholder="ç®¡ç†å‘˜å¯†ç " autocomplete="off" value="admin123">
                <button class="btn-primary" onclick="adminLogin()">ç¡®è®¤ç™»å½•</button>
                <p class="msg err-msg" id="adminMsg"></p>
                <button class="btn-link" onclick="showPage('indexPage')">â† è¿”å›é¦–é¡µ</button>
            </div>
        </div>

        <!-- ç®¡ç†å‘˜åå° -->
        <div class="page" id="adminPage">
            <h1>ç®¡ç†å‘˜ - ç®¡ç†åå°</h1>
            <p class="msg admin-msg" style="text-align:center;margin-bottom:20px;">ğŸ“Š ç³»ç»Ÿæ•°æ®ç»Ÿè®¡ä¸ç®¡ç†</p>
            
            <!-- ç»Ÿè®¡å¡ç‰‡ -->
            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-bottom:20px;">
                <div class="stat-card admin">
                    <div class="stat-title">æ€»ç”¨æˆ·æ•°</div>
                    <div class="stat-value" id="totalUserCount">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-title">åœ¨çº¿ç”¨æˆ·æ•°</div>
                    <div class="stat-value" id="onlineUserCount">0</div>
                </div>
                <div class="stat-card admin">
                    <div class="stat-title">æ€»å¡å¯†æ•°</div>
                    <div class="stat-value" id="totalCardCount">0</div>
                </div>
            </div>

            <!-- å¡å¯†ç®¡ç† -->
            <div class="form-box">
                <select id="cardTypeSelect" class="form-control">
                    <option value="day">å¤©å¡ï¼ˆ24å°æ—¶ï¼‰</option>
                    <option value="week">å‘¨å¡ï¼ˆ7å¤©ï¼‰</option>
                    <option value="month">æœˆå¡ï¼ˆ30å¤©ï¼‰</option>
                    <option value="forever">æ°¸ä¹…å¡ï¼ˆæ— æœŸé™ï¼‰</option>
                </select>
                <button class="btn-primary" onclick="generateCard()">ğŸ“‡ ç”Ÿæˆå¯¹åº”å¡å¯†</button>
                <button class="btn-secondary" onclick="renderCardList()">ğŸ“‹ æŸ¥çœ‹æ‰€æœ‰å¡å¯†</button>
                <button class="btn-warning" onclick="renderUserList()">ğŸ‘¥ æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·</button>
                <p class="msg succ-msg" id="cardMsg"></p>
                <div id="cardList" class="no-result">æš‚æ— å¡å¯†ï¼Œç‚¹å‡»ä¸Šæ–¹ç”Ÿæˆ</div>
            </div>
            
            <!-- ç”¨æˆ·åˆ—è¡¨å®¹å™¨ -->
            <div id="userList" class="no-result" style="display:none;margin-top:20px;">æš‚æ— ç”¨æˆ·æ•°æ®</div>

            <button class="btn-danger" onclick="adminLogout()">ğŸšª é€€å‡ºåå°</button>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡åˆå§‹åŒ–
        let currentUser = '';
        let currentFriend = '';
        let currentMode = 'multi';
        // æœ¬åœ°å­˜å‚¨æ•°æ®ï¼ˆåˆå§‹åŒ–é˜²é”™ï¼‰
        let users = JSON.parse(localStorage.getItem('ahaoUsers')) || [];
        let cards = JSON.parse(localStorage.getItem('ahaoCards')) || [];
        let friends = JSON.parse(localStorage.getItem('ahaoFriends')) || [];
        let multiChatRecords = JSON.parse(localStorage.getItem('ahaoMultiChat')) || [];
        let aiChatRecords = JSON.parse(localStorage.getItem('ahaoAIChat')) || [];
        let onlineUsers = JSON.parse(localStorage.getItem('ahaoOnlineUsers')) || [];
        // ç®¡ç†å‘˜è´¦å·
        const ADMIN_ACCOUNT = 'admin';
        const ADMIN_PWD = 'admin123';
        // å¡å¯†é…ç½®
        const CARD_CONFIG = {
            day: {name: 'å¤©å¡', expire: 86400000},
            week: {name: 'å‘¨å¡', expire: 604800000},
            month: {name: 'æœˆå¡', expire: 2592000000},
            forever: {name: 'æ°¸ä¹…å¡', expire: -1}
        };
        // AIå›å¤åº“
        const AI_REPLY_LIB = {
            'ä½ å¥½': ['ä½ å¥½å‘€ï½ğŸ˜Š', 'å“ˆå–½ï½å¾ˆé«˜å…´è®¤è¯†ä½ ï¼', 'å—¨ï½æœ‰ä»€ä¹ˆæˆ‘èƒ½å¸®ä½ çš„å—ï¼Ÿ'],
            'åœ¨å—': ['æˆ‘ä¸€ç›´éƒ½åœ¨å“¦ï½', 'åœ¨çš„åœ¨çš„ï½éšæ—¶ä¸ºä½ æœåŠ¡ï¼', 'åœ¨å‘¢ï½æœ‰ä»€ä¹ˆæƒ³èŠçš„ï¼Ÿ'],
            'è°¢è°¢': ['ä¸å®¢æ°”ï½ğŸ˜œ', 'ä¸ç”¨è°¢ï½èƒ½å¸®åˆ°ä½ å°±å¥½ï¼', 'å˜¿å˜¿ï½åº”è¯¥çš„ï¼'],
            'å†è§': ['æ‹œæ‹œï½ä¸‹æ¬¡å†èŠï¼', 'å†è§å•¦ï½æœŸå¾…ä¸‹æ¬¡ç›¸é‡ï¼', 'æ…¢èµ°ï½æœ‰ç©ºå¸¸æ¥ï¼'],
            'åƒé¥­äº†å—': ['æˆ‘ä¸ç”¨åƒé¥­çš„ï½é ç”µå°±èƒ½æ´»ï¼âš¡', 'è¿˜æ²¡å‘¢ï½ä½ è¯·æˆ‘å—ï¼ŸğŸ˜', 'æˆ‘æ˜¯AIï¼Œä¸éœ€è¦åƒé¥­å“’ï½'],
            'ä½ æ˜¯è°': ['æˆ‘æ˜¯é˜¿è±ªå¼€å‘å¹³å°çš„æ™ºèƒ½AIåŠ©æ‰‹ï½', 'æˆ‘æ˜¯ä½ çš„ä¸“å±AIèŠå¤©æ­å­ï¼', 'æˆ‘æ˜¯ä¸€ä¸ªå¯çˆ±çš„æ™ºèƒ½AIå‘€ï½'],
            'è®²ä¸ªç¬‘è¯': ['ä»å‰æœ‰ä¸ªç«æŸ´ï¼Œå®ƒèµ°åœ¨è·¯ä¸Šï¼Œçªç„¶è§‰å¾—å¤´ç—’ï¼Œå°±æŒ äº†æŒ ï¼Œç„¶åå®ƒå°±ç€ç«äº†ï½ğŸ”¥', 'ä»€ä¹ˆé—¨æ°¸è¿œå…³ä¸ä¸Šï¼Ÿç­”æ¡ˆï¼šçƒé—¨ï½âš½']
        };

        // é¡µé¢åˆå§‹åŒ–
        window.onload = function() {
            // ç»‘å®šå›è½¦å‘é€
            document.getElementById('multiChatContent').addEventListener('keydown', function(e) {
                if(e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMultiChatMsg();
                }
            });
            document.getElementById('aiChatContent').addEventListener('keydown', function(e) {
                if(e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendAIChatMsg();
                }
            });
            // åˆå§‹åŒ–æ¸²æŸ“
            renderFriendList();
            renderAIChatRecords();
            // é¡µé¢å…³é—­æ›´æ–°ç¦»çº¿çŠ¶æ€
            window.addEventListener('beforeunload', function() {
                if (currentUser) setUserOffline(currentUser);
            });
            // ä¿®å¤ç§»åŠ¨ç«¯ç‚¹å‡»å»¶è¿Ÿ
            document.addEventListener('touchstart', function() {}, false);
        };

        // åœ¨çº¿çŠ¶æ€ç®¡ç†
        function setUserOnline(username) {
            if (!onlineUsers.includes(username)) {
                onlineUsers.push(username);
                localStorage.setItem('ahaoOnlineUsers', JSON.stringify(onlineUsers));
            }
            updateAdminStats();
        }
        function setUserOffline(username) {
            onlineUsers = onlineUsers.filter(user => user !== username);
            localStorage.setItem('ahaoOnlineUsers', JSON.stringify(onlineUsers));
            updateAdminStats();
        }
        // æ›´æ–°ç®¡ç†å‘˜ç»Ÿè®¡æ•°æ®
        function updateAdminStats() {
            if (document.getElementById('adminPage').classList.contains('active')) {
                document.getElementById('totalUserCount').innerText = users.length;
                document.getElementById('onlineUserCount').innerText = onlineUsers.length;
                document.getElementById('totalCardCount').innerText = cards.length;
            }
        }

        // é¡µé¢/å­é¡µé¢åˆ‡æ¢
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            document.querySelectorAll('.msg').forEach(m => m.innerText = '');
            if (pageId === 'adminPage') updateAdminStats();
        }
        function showSubPage(subPageId) {
            document.querySelectorAll('#multiChatPanel .chat-panel').forEach(p => p.classList.remove('active'));
            document.getElementById(subPageId).classList.add('active');
        }

        // æ¨¡å¼åˆ‡æ¢
        function switchMode(mode) {
            currentMode = mode;
            const multiBtn = document.getElementById('multiModeBtn');
            const aiBtn = document.getElementById('aiModeBtn');
            const multiPanel = document.getElementById('multiChatPanel');
            const aiPanel = document.getElementById('aiChatPanel');
            
            multiBtn.classList.remove('active');
            aiBtn.classList.remove('active', 'ai-active');
            multiPanel.classList.remove('active');
            aiPanel.classList.remove('active');
            
            if (mode === 'multi') {
                multiBtn.classList.add('active');
                multiPanel.classList.add('active');
            } else {
                aiBtn.classList.add('active', 'ai-active');
                aiPanel.classList.add('active');
            }
        }

        // æ™®é€šç”¨æˆ·ï¼šæ³¨å†Œ
        function userReg() {
            const uname = document.getElementById('regUser').value.trim();
            const pwd = document.getElementById('regPwd').value.trim();
            const regMsg = document.getElementById('regMsg');
            
            if (!uname) {regMsg.innerText = 'âŒ è¯·è¾“å…¥ç”¨æˆ·å'; return;}
            if (uname.length <3 || uname.length>10) {regMsg.innerText = 'âŒ ç”¨æˆ·åéœ€3-10ä½'; return;}
            if (!pwd) {regMsg.innerText = 'âŒ è¯·è¾“å…¥å¯†ç '; return;}
            if (pwd.length <6 || pwd.length>16) {regMsg.innerText = 'âŒ å¯†ç éœ€6-16ä½'; return;}
            if (users.some(u => u.uname === uname)) {regMsg.innerText = 'âŒ ç”¨æˆ·åå·²å­˜åœ¨'; return;}
            
            users.push({uname, pwd, nickname:uname, avatar:'', createTime:new Date().toLocaleString()});
            localStorage.setItem('ahaoUsers', JSON.stringify(users));
            regMsg.className = 'succ-msg';
            regMsg.innerText = 'âœ… æ³¨å†ŒæˆåŠŸï¼Œå³å°†è·³è½¬ç™»å½•';
            setTimeout(() => showPage('loginPage'), 1500);
            // æ¸…ç©ºè¾“å…¥æ¡†
            document.getElementById('regUser').value = '';
            document.getElementById('regPwd').value = '';
        }

        // æ™®é€šç”¨æˆ·ï¼šç™»å½•
        function userLogin() {
            const uname = document.getElementById('loginUser').value.trim();
            const pwd = document.getElementById('loginPwd').value.trim();
            const cardCode = document.getElementById('loginCard').value.trim().toUpperCase();
            const loginMsg = document.getElementById('loginMsg');
            
            // 1. éç©ºæ ¡éªŒ
            if (!uname) {loginMsg.innerText = 'âŒ è¯·è¾“å…¥ç”¨æˆ·å'; return;}
            if (!pwd) {loginMsg.innerText = 'âŒ è¯·è¾“å…¥å¯†ç '; return;}
            if (!cardCode) {loginMsg.innerText = 'âŒ è¯·è¾“å…¥å¡å¯†'; return;}
            // 2. ç”¨æˆ·å­˜åœ¨æ ¡éªŒ
            const user = users.find(u => u.uname === uname && u.pwd === pwd);
            if (!user) {loginMsg.innerText = 'âŒ ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯'; return;}
            // 3. å¡å¯†å­˜åœ¨æ ¡éªŒ
            const card = cards.find(c => c.code === cardCode);
            if (!card) {loginMsg.innerText = 'âŒ å¡å¯†æ— æ•ˆ'; return;}
            // 4. å¡å¯†æœ‰æ•ˆæœŸæ ¡éªŒ
            if (card.expireTime !== -1 && Date.now() > card.expireTime) {
                loginMsg.innerText = 'âŒ å¡å¯†å·²è¿‡æœŸ'; return;
            }
            // 5. è®°å½•å¡å¯†ä½¿ç”¨ç”¨æˆ·ï¼ˆå»é‡ï¼‰
            let usedUsers = card.usedUsers || [];
            if (!usedUsers.includes(uname)) {
                usedUsers.push(uname);
                cards = cards.map(c => c.code === cardCode ? {...c, usedUsers} : c);
                localStorage.setItem('ahaoCards', JSON.stringify(cards));
            }
            // 6. ç™»å½•æˆåŠŸå¤„ç†
            currentUser = uname;
            setUserOnline(uname);
            document.getElementById('currentUserName').innerText = user.nickname || uname;
            document.getElementById('userNameShow').style.display = 'block';
            renderFriendList();
            showPage('mainPage');
            // æ¸…ç©ºè¾“å…¥æ¡†
            document.getElementById('loginUser').value = '';
            document.getElementById('loginPwd').value = '';
            document.getElementById('loginCard').value = '';
        }

        // é€€å‡ºç™»å½•
        function userLogout() {
            if (currentUser) setUserOffline(currentUser);
            currentUser = '';
            currentFriend = '';
            document.getElementById('userNameShow').style.display = 'none';
            switchMode('multi');
            showPage('indexPage');
        }

        // ä¿®æ”¹ä¸ªäººèµ„æ–™
        function updateProfile() {
            const newNick = document.getElementById('newNickname').value.trim();
            const profileMsg = document.getElementById('profileMsg');
            
            if (!newNick) {
                profileMsg.className = 'err-msg';
                profileMsg.innerText = 'âŒ è¯·è¾“å…¥æ–°æ˜µç§°';
                return;
            }
            if (newNick.length <3 || newNick.length>10) {
                profileMsg.className = 'err-msg';
                profileMsg.innerText = 'âŒ æ˜µç§°éœ€3-10ä½';
                return;
            }
            
            users = users.map(u => u.uname === currentUser ? {...u, nickname:newNick} : u);
            localStorage.setItem('ahaoUsers', JSON.stringify(users));
            document.getElementById('currentUserName').innerText = newNick;
            profileMsg.className = 'succ-msg';
            profileMsg.innerText = 'âœ… èµ„æ–™ä¿®æ”¹æˆåŠŸ';
            document.getElementById('newNickname').value = '';
        }

        // å¤šäººäº¤æµï¼šæ·»åŠ å¥½å‹
        function addFriend() {
            const fname = document.getElementById('addFriendName').value.trim();
            const addFriendMsg = document.getElementById('addFriendMsg');
            
            if (!fname) {addFriendMsg.innerText = 'âŒ è¯·è¾“å…¥å¥½å‹ç”¨æˆ·å'; return;}
            if (fname === currentUser) {addFriendMsg.innerText = 'âŒ ä¸èƒ½æ·»åŠ è‡ªå·±ä¸ºå¥½å‹'; return;}
            if (!users.some(u => u.uname === fname)) {addFriendMsg.innerText = 'âŒ è¯¥ç”¨æˆ·ä¸å­˜åœ¨'; return;}
            if (friends.some(f => (f.user === currentUser && f.friend === fname) || (f.user === fname && f.friend === currentUser))) {
                addFriendMsg.innerText = 'âŒ è¯¥ç”¨æˆ·å·²æ˜¯ä½ çš„å¥½å‹'; return;
            }
            
            friends.push({user:currentUser, friend:fname});
            friends.push({user:fname, friend:currentUser});
            localStorage.setItem('ahaoFriends', JSON.stringify(friends));
            document.getElementById('friendInfo').innerHTML = `<div class="list-item">âœ… ç”¨æˆ·åï¼š${fname}<br>æ·»åŠ æˆåŠŸï¼</div>`;
            renderFriendList();
            document.getElementById('addFriendName').value = '';
        }

        // å¤šäººäº¤æµï¼šæ¸²æŸ“å¥½å‹åˆ—è¡¨ï¼ˆå¸¦åœ¨çº¿çŠ¶æ€ï¼‰
        function renderFriendList() {
            const friendList = document.getElementById('friendList');
            const friendCount = document.getElementById('friendCount');
            const userFriends = friends.filter(f => f.user === currentUser);
            friendCount.innerText = userFriends.length;
            
            if (userFriends.length === 0) {
                friendList.innerHTML = '<p class="no-result">æš‚æ— å¥½å‹ï¼Œå¿«å»æ·»åŠ å§ï½</p>';
                return;
            }
            
            friendList.innerHTML = '';
            userFriends.forEach(f => {
                const isOnline = onlineUsers.includes(f.friend);
                const friendUser = users.find(u => u.uname === f.friend);
                const friendNick = friendUser ? friendUser.nickname || f.friend : f.friend;
                const statusTag = isOnline ? '<span class="online-tag"></span>' : '<span class="offline-tag"></span>';
                const statusText = isOnline ? '<span style="color:var(--online-color);">ï¼ˆåœ¨çº¿ï¼‰</span>' : '<span style="color:#999;">ï¼ˆç¦»çº¿ï¼‰</span>';
                
                const friendItem = document.createElement('div');
                friendItem.className = 'list-item';
                friendItem.innerHTML = `<div class="item-content">${statusTag}${friendNick} ${statusText}</div>`;
                friendItem.onclick = function() {
                    currentFriend = f.friend;
                    document.getElementById('multiChatTitle').innerText = `ä¸ ${friendNick} èŠå¤© ${statusTag}`;
                    renderMultiChatRecords();
                    showSubPage('multiChatSubPage');
                };
                friendList.appendChild(friendItem);
            });
        }

        // å¤šäººäº¤æµï¼šå‘é€æ¶ˆæ¯
        function sendMultiChatMsg() {
            const content = document.getElementById('multiChatContent').value.trim();
            if (!content || !currentFriend) return;
            
            const time = new Date().toLocaleString();
            multiChatRecords.push({from: currentUser, to: currentFriend, content, time});
            localStorage.setItem('ahaoMultiChat', JSON.stringify(multiChatRecords));
            document.getElementById('multiChatContent').value = '';
            renderMultiChatRecords();
        }

        // å¤šäººäº¤æµï¼šæ¸²æŸ“èŠå¤©è®°å½•
        function renderMultiChatRecords() {
            const chatList = document.getElementById('multiChatList');
            const userChat = multiChatRecords.filter(c => 
                (c.from === currentUser && c.to === currentFriend) || 
                (c.from === currentFriend && c.to === currentUser)
            );
            
            if (userChat.length === 0) {
                chatList.innerHTML = '<p class="no-result">è¿˜æ²¡æœ‰èŠå¤©è®°å½•ï¼Œå‘ä¸ªæ¶ˆæ¯æ‰“ä¸ªæ‹›å‘¼å§ï½</p>';
                return;
            }
            
            chatList.innerHTML = '';
            userChat.forEach(c => {
                const chatItem = document.createElement('div');
                chatItem.className = `chat-item ${c.from === currentUser ? 'send' : 'receive'}`;
                const senderName = c.from === currentUser ? 'æˆ‘' : (users.find(u => u.uname === c.from)?.nickname || c.from);
                
                chatItem.innerHTML = `
                    <div class="sender">${senderName}</div>
                    <div>${c.content}</div>
                    <div class="chat-time">${c.time}</div>
                `;
                chatList.appendChild(chatItem);
            });
            chatList.scrollTop = chatList.scrollHeight;
        }

        // AIå¯¹è¯ï¼šå‘é€æ¶ˆæ¯
        function sendAIChatMsg() {
            const content = document.getElementById('aiChatContent').value.trim();
            if (!content) return;
            
            const time = new Date().toLocaleString();
            aiChatRecords.push({role: 'user', content, time});
            const aiReply = getAIReply(content);
            aiChatRecords.push({role: 'ai', content: aiReply, time});
            localStorage.setItem('ahaoAIChat', JSON.stringify(aiChatRecords));
            document.getElementById('aiChatContent').value = '';
            renderAIChatRecords();
        }

        // AIæ™ºèƒ½å›å¤
        function getAIReply(input) {
            input = input.replace(/[ã€‚ï¼Œï¼ï¼Ÿã€]/g, '').toLowerCase();
            for (const [key, replies] of Object.entries(AI_REPLY_LIB)) {
                if (input.includes(key.toLowerCase())) {
                    return replies[Math.floor(Math.random() * replies.length)];
                }
            }
            const defaultReplies = [
                'å“‡ï½è¿™ä¸ªé—®é¢˜æœ‰ç‚¹æ„æ€ï¼',
                'æˆ‘ä¸å¤ªæ‡‚è¿™ä¸ªå‘¢ï½å¯ä»¥æ¢ä¸ªè¯é¢˜å—ï¼ŸğŸ˜¥',
                'å“ˆå“ˆï½ä½ çœŸæœ‰è¶£ï¼',
                'åŸæ¥æ˜¯è¿™æ ·å‘€ï½æ¶¨çŸ¥è¯†äº†ï¼'
            ];
            return defaultReplies[Math.floor(Math.random() * defaultReplies.length)];
        }

        // AIå¯¹è¯ï¼šæ¸²æŸ“èŠå¤©è®°å½•
        function renderAIChatRecords() {
            const chatList = document.getElementById('aiChatList');
            if (aiChatRecords.length === 0) {
                chatList.innerHTML = '<p class="no-result">ğŸ¤– ä½ å¥½å‘€ï¼æˆ‘æ˜¯ä½ çš„æ™ºèƒ½AIåŠ©æ‰‹ï¼Œæœ‰ä»€ä¹ˆæƒ³èŠçš„å°½ç®¡è¯´ï½</p>';
                return;
            }
            
            chatList.innerHTML = '';
            aiChatRecords.forEach(c => {
                const chatItem = document.createElement('div');
                chatItem.className = `chat-item ${c.role === 'user' ? 'send' : 'ai-chat'}`;
                chatItem.innerHTML = `
                    <div class="sender">${c.role === 'user' ? 'æˆ‘' : 'AIåŠ©æ‰‹'}</div>
                    <div>${c.content}</div>
                    <div class="chat-time">${c.time}</div>
                `;
                chatList.appendChild(chatItem);
            });
            chatList.scrollTop = chatList.scrollHeight;
        }

        // ç®¡ç†å‘˜ï¼šç™»å½•
        function adminLogin() {
            const uname = document.getElementById('adminUser').value.trim();
            const pwd = document.getElementById('adminPwd').value.trim();
            const adminMsg = document.getElementById('adminMsg');
            
            if (uname !== ADMIN_ACCOUNT || pwd !== ADMIN_PWD) {
                adminMsg.innerText = 'âŒ ç®¡ç†å‘˜è´¦å·æˆ–å¯†ç é”™è¯¯';
                return;
            }
            showPage('adminPage');
            updateAdminStats();
            renderCardList();
        }

        // ç®¡ç†å‘˜ï¼šé€€å‡º
        function adminLogout() {
            showPage('indexPage');
            document.getElementById('userList').style.display = 'none';
            document.getElementById('cardList').style.display = 'block';
        }

        // ç®¡ç†å‘˜ï¼šç”Ÿæˆå¡å¯†
        function generateCard() {
            const cardType = document.getElementById('cardTypeSelect').value;
            const {name, expire} = CARD_CONFIG[cardType];
            const randomStr = () => Math.random().toString(36).substring(2, 10).toUpperCase();
            const cardCode = `${randomStr()}-${randomStr().substring(0,4)}-${randomStr()}`;
            const expireTime = expire === -1 ? -1 : Date.now() + expire;
            
            cards.push({code: cardCode, type: cardType, name, expireTime, usedUsers: []});
            localStorage.setItem('ahaoCards', JSON.stringify(cards));
            document.getElementById('cardMsg').innerText = `âœ… ${name}ç”ŸæˆæˆåŠŸï¼š${cardCode}`;
            renderCardList();
            updateAdminStats();
        }

        // ç®¡ç†å‘˜ï¼šåˆ é™¤å¡å¯†
        function deleteCard(cardCode) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¯¥å¡å¯†å—ï¼Ÿåˆ é™¤åä¸å¯æ¢å¤ï¼')) {
                cards = cards.filter(c => c.code !== cardCode);
                localStorage.setItem('ahaoCards', JSON.stringify(cards));
                document.getElementById('cardMsg').innerText = `âœ… å¡å¯†${cardCode}å·²æˆåŠŸåˆ é™¤`;
                renderCardList();
                updateAdminStats();
            }
        }

        // ç®¡ç†å‘˜ï¼šæ¸²æŸ“å¡å¯†åˆ—è¡¨ï¼ˆå¸¦åˆ é™¤æŒ‰é’®ï¼‰
        function renderCardList() {
            document.getElementById('userList').style.display = 'none';
            const cardList = document.getElementById('cardList');
            cardList.style.display = 'block';
            
            if (cards.length === 0) {
                cardList.innerHTML = '<p class="no-result">æš‚æ— å¡å¯†ï¼Œç‚¹å‡»ä¸Šæ–¹ç”Ÿæˆï½</p>';
                return;
            }
            
            cardList.innerHTML = '';
            cards.sort((a,b) => b.expireTime - a.expireTime).forEach(c => {
                const useCount = c.usedUsers ? c.usedUsers.length : 0;
                const expireText = c.expireTime === -1 ? 'ğŸ”´ æ°¸ä¹…æœ‰æ•ˆ' : `ğŸ“… æœ‰æ•ˆæœŸè‡³ï¼š${new Date(c.expireTime).toLocaleString()}`;
                const statusText = c.expireTime !== -1 && Date.now() > c.expireTime ? '<span style="color:var(--admin-color);">âŒ å·²è¿‡æœŸ</span>' : 'âœ… æœ‰æ•ˆ';
                const userText = useCount > 0 ? `ğŸ‘¥ ä½¿ç”¨ç”¨æˆ·ï¼š${c.usedUsers.join('ã€')}` : 'ğŸ‘¥ æš‚æ— ä½¿ç”¨ç”¨æˆ·';
                
                const cardItem = document.createElement('div');
                cardItem.className = 'list-item admin-item';
                cardItem.innerHTML = `
                    <div class="item-content">
                        <div><strong>å¡å¯†ï¼š</strong>${c.code}</div>
                        <div><strong>ç±»å‹ï¼š</strong>${c.name}</div>
                        <div><strong>çŠ¶æ€ï¼š</strong>${statusText}</div>
                        <div><strong>${expireText}</strong></div>
                        <div><strong>ä½¿ç”¨äººæ•°ï¼š</strong><span class="admin-msg">${useCount}äºº</span></div>
                        <div><strong>${userText}</strong></div>
                    </div>
                    <div class="item-actions">
                        <button class="btn-del" onclick="deleteCard('${c.code}')">åˆ é™¤å¡å¯†</button>
                    </div>
                `;
                cardList.appendChild(cardItem);
            });
        }

        // ç®¡ç†å‘˜ï¼šæ¸²æŸ“ç”¨æˆ·åˆ—è¡¨ï¼ˆå¸¦åœ¨çº¿çŠ¶æ€ï¼‰
        function renderUserList() {
            document.getElementById('cardList').style.display = 'none';
            const userList = document.getElementById('userList');
            userList.style.display = 'block';
            
            if (users.length === 0) {
                userList.innerHTML = '<p class="no-result">æš‚æ— ç”¨æˆ·æ•°æ®ï½</p>';
                return;
            }
            
            userList.innerHTML = '';
            users.sort((a,b) => new Date(b.createTime) - new Date(a.createTime)).forEach(u => {
                const isOnline = onlineUsers.includes(u.uname);
                const statusTag = isOnline ? '<span class="online-tag"></span>' : '<span class="offline-tag"></span>';
                const statusText = isOnline ? '<span style="color:var(--online-color);">åœ¨çº¿</span>' : '<span style="color:#999;">ç¦»çº¿</span>';
                const userCardCount = cards.filter(c => c.usedUsers && c.usedUsers.includes(u.uname)).length;
                
                const userItem = document.createElement('div');
                userItem.className = 'list-item user-item';
                userItem.innerHTML = `
                    <div class="item-content">
                        <div><strong>ç”¨æˆ·åï¼š</strong>${u.uname}</div>
                        <div><strong>æ˜µç§°ï¼š</strong>${u.nickname || u.uname}</div>
                        <div><strong>çŠ¶æ€ï¼š</strong>${statusTag}${statusText}</div>
                        <div><strong>æ³¨å†Œæ—¶é—´ï¼š</strong>${u.createTime}</div>
                        <div><strong>ä½¿ç”¨å¡å¯†æ•°ï¼š</strong>${userCardCount}ä¸ª</div>
                    </div>
                `;
                userList.appendChild(userItem);
            });
        }

        // æ ¸å¿ƒåŠŸèƒ½ï¼šæ‰“å¼€ç”µå½±ç«™
        function openMovieSite() {
            window.open('https://pps3366.com', '_blank');
        }
    </script>
</body>
</html>